/dts-v1/;
#include <nordic/nrf5340_cpuapp_qkaa.dtsi>
#include "opale-pinctrl.dtsi"

/ {
	model = "Custom Board auto generated by nRF Connect for VS Code (CPUAPP)";
	compatible = "unistra,opale-cpuapp";

	chosen {
		zephyr,sram = &sram0_image;
		zephyr,flash = &flash0;
		zephyr,code-partition = &slot0_partition;
		zephyr,sram-secure-partition = &sram0_s;
		zephyr,sram-non-secure-partition = &sram0_ns;
	};

	leds {
		compatible = "gpio-leds";
		blue: blue {
			gpios = <&gpio0 29 0>;
			label = "BLUE";
		};

		red: red {
			gpios = <&gpio0 30 0>;
			label = "RED";
		};

		green: green {
			gpios = <&gpio1 10 0>;
			label = "GREEN";
		};
	};

	zephyr,user {
		engine1-gpios = <&gpio0 16 0>;
		engine2-gpios = <&gpio0 14 0>;
		engine3-gpios = <&gpio0 22 0>;
		engine4-gpios = <&gpio0 18 0>;
		IMU9_BOOT-gpios = <&gpio0 3 0>;
		IMU9_INT-gpios = <&gpio0 10 0>;
		IMU9_STATUS-gpios = <&gpio0 15 0>;
		peripheral_reset-gpios = <&gpio1 3 0>;
		accel1_int-gpios = <&gpio0 23 0>;
		accel2_int-gpios = <&gpio0 20 0>;
		gps_int-gpios = <&gpio1 13 (GPIO_ACTIVE_LOW | (1 << 9))>;
		GPS_clk-gpios = <&gpio1 15 0>;
	};

	buttons {
		compatible = "gpio-keys";
		in1: in1 {
			gpios = <&gpio1 7 0>;
			label = "IN1";
		};

		in2: in2 {
			gpios = <&gpio1 9 0>;
			label = "IN2";
		};

		in3: in3 {
			gpios = <&gpio0 24 0>;
			label = "IN3";
		};

		rocketenable: rocket_enable {
			gpios = <&gpio0 8 0>;
			label = "ROCKET_ENABLE";
		};
	};
};

#include "opale-cpuapp_partitioning.dtsi"
#include "opale-shared_sram.dtsi"

&comp {
	compatible = "nordic,nrf-lpcomp";
};

&timer0 {
	status = "okay";
};

&timer1 {
	status = "disabled";
};

&timer2 {
	status = "disabled";
};

&gpio0 {
	status = "okay";
};

&gpio1 {
	status = "okay";
};

pos_ailerons: &pwm0 {
	status = "okay";
	pinctrl-0 = <&pwm0_default>;
	pinctrl-names = "default";
};

&pinctrl {
	pwm0_default: pwm0_default {
		group1 {
			psels = <NRF_PSEL(PWM_OUT0, 1, 14)>,
					<NRF_PSEL(PWM_OUT1, 1, 12)>,
					<NRF_PSEL(PWM_OUT2, 1, 0)>,
					<NRF_PSEL(PWM_OUT3, 0, 2)>;
		};
	};

	spi0_default: spi0_default {
		group1 {
			psels = <NRF_PSEL(SPIM_MISO, 1, 4)>,
					<NRF_PSEL(SPIM_MOSI, 0, 19)>,
					<NRF_PSEL(SPIM_SCK, 0, 21)>;
		};
	};

	pwm1_default: pwm1_default {
		group1 {
			psels = <NRF_PSEL(PWM_OUT0, 1, 1)>;
		};
	};

	pwm2_default: pwm2_default {
		group1 {
			psels = <NRF_PSEL(PWM_OUT0, 0, 17)>;
		};
	};

	i2c0_default: i2c0_default {
		group1 {
			psels = <NRF_PSEL(TWIM_SCL, 0, 12)>, <NRF_PSEL(TWIM_SDA, 0, 13)>;
		};
	};

	uart0_default: uart0_default {
		group1 {
			psels = <NRF_PSEL(UART_RX, 1, 2)>, <NRF_PSEL(UART_TX, 0, 9)>;
		};
	};

	uart1_default: uart1_default {
		group1 {
			psels = <NRF_PSEL(UART_TX, 1, 11)>, <NRF_PSEL(UART_RX, 0, 31)>;
		};
	};
};

&spi0 {
	status = "disabled";
	pinctrl-0 = <&spi0_default>;
	pinctrl-names = "default";
	cs-gpios = <&gpio1 8 0>;
	max-frequency = <DT_FREQ_M(20)>;
};

parachute: &pwm1 {
	status = "okay";
	pinctrl-0 = <&pwm1_default>;
	pinctrl-names = "default";
};

buzzer: &pwm2 {
	status = "okay";
	pinctrl-0 = <&pwm2_default>;
	pinctrl-names = "default";
};

&i2c0 {
	status = "okay";
	pinctrl-0 = <&i2c0_default>;
	pinctrl-names = "default";
};

&adc {
	status = "okay";
};

&uart0 {
	status = "okay";
	current-speed = <115200>;
	pinctrl-0 = <&uart0_default>;
	pinctrl-names = "default";
};

&uart1 {
	status = "okay";
	current-speed = <115200>;
	pinctrl-0 = <&uart1_default>;
	pinctrl-names = "default";
};

&pdm0 {
	status = "disabled";
};

&kmu {
	status = "disabled";
};

&cryptocell {
	status = "disabled";
};

&spu {
	status = "disabled";
};

&nfct {
	status = "disabled";
};

&ctrlap {
	status = "disabled";
};

&wdt1 {
	status = "disabled";
};

&wdt {
	status = "okay";
};

&comp {
	status = "disabled";
};

&regulators {
	status = "disabled";
};

&power {
	status = "disabled";
};

&egu0 {
	status = "okay";
};

&egu5 {
	status = "disabled";
};

&egu4 {
	status = "disabled";
};

&egu2 {
	status = "disabled";
};

&egu1 {
	status = "disabled";
};

&egu3 {
	status = "disabled";
};

