/* ============================================================
 * This file is the overlay DTS for topaze that define the PWM
 * peripheral
 *
 * We describe here the peripherals configuration, and so on...
 *
 * l.heywang
 * 18/02/2025
 *
 * ============================================================
 */

// ============================================================
// PWM
// ============================================================
// Peripheral configuration
&pwm0 {
    status = "okay";
    pinctrl-0 = <&pwm0_default>;
    pinctrl-names = "default";
};

// Pin muxing configuration
&pinctrl {
    pwm0_default: pwm0_default {
        group1 {
            psels =     <NRF_PSEL(PWM_OUT0, 0, 29)>,
                        <NRF_PSEL(PWM_OUT1, 0, 30)>, 
                        <NRF_PSEL(PWM_OUT2, 0, 31)>;
            nordic,invert;
        };
    };
};

// Operating parameters configuration
/{
    pwmleds {
        compatible = "pwm-leds";
        servo1: pwm_led_0 {
            pwms = <&pwm0 0 PWM_MSEC(20) PWM_POLARITY_NORMAL>;
            // min-pulse = <PWM_USEC(700)>;
            // max-pulse = <PWM_USEC(2300)>;
        };
        servo2: pwm_led_1 {
            pwms = <&pwm0 1 PWM_MSEC(20) PWM_POLARITY_NORMAL>;
            // min-pulse = <PWM_USEC(700)>;
            // max-pulse = <PWM_USEC(2300)>;
        };
        servo3: pwm_led_2 {
            pwms = <&pwm0 2 PWM_MSEC(20) PWM_POLARITY_NORMAL>;
            // min-pulse = <PWM_USEC(700)>;
            // max-pulse = <PWM_USEC(2300)>;
        };
    };
};






